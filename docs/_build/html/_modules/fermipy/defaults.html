

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>fermipy.defaults &mdash; Fermipy 0.18.0+25.g938c.dirty documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Fermipy
          

          
          </a>

          
            
            
              <div class="version">
                0.18.0+25.g938c.dirty
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../output.html">Output File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fitting.html">ROI Optimization and Fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../model.html">Customizing the Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer.html">Developer Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/index.html">Advanced Analysis Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../validation/index.html">Validation Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fermipy.html">fermipy package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fermipy_jobs.html">fermipy.jobs subpackage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fermipy_diffuse.html">fermipy.diffuse subpackage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Fermipy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../fermipy.html">fermipy</a> &raquo;</li>
        
      <li>fermipy.defaults</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for fermipy.defaults</h1><div class="highlight"><pre>
<span></span><span class="c1"># Licensed under a 3-clause BSD style license - see LICENSE.rst</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">astropy</span>
<span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="k">import</span> <span class="n">SkyCoord</span>
<span class="kn">import</span> <span class="nn">fermipy.skymap</span>
<span class="kn">from</span> <span class="nn">fermipy.data_struct</span> <span class="k">import</span> <span class="n">MutableNamedTuple</span>


<div class="viewcode-block" id="make_default_dict"><a class="viewcode-back" href="../../fermipy.html#fermipy.defaults.make_default_dict">[docs]</a><span class="k">def</span> <span class="nf">make_default_dict</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>

    <span class="n">o</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">o</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">o</span></div>


<div class="viewcode-block" id="make_default_tuple"><a class="viewcode-back" href="../../fermipy.html#fermipy.defaults.make_default_tuple">[docs]</a><span class="k">def</span> <span class="nf">make_default_tuple</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
    <span class="n">vals</span> <span class="o">=</span> <span class="p">[(</span><span class="n">k</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="k">return</span> <span class="n">MutableNamedTuple</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span></div>


<div class="viewcode-block" id="make_attrs_class"><a class="viewcode-back" href="../../fermipy.html#fermipy.defaults.make_attrs_class">[docs]</a><span class="k">def</span> <span class="nf">make_attrs_class</span><span class="p">(</span><span class="n">typename</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>

    <span class="kn">import</span> <span class="nn">attr</span>

    <span class="n">vals</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="nb">float</span><span class="p">:</span>
            <span class="n">vals</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">ib</span><span class="p">(</span>
                <span class="n">default</span><span class="o">=</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">validator</span><span class="o">=</span><span class="n">attr</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">instance_of</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vals</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">ib</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">C</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">make_class</span><span class="p">(</span><span class="n">typename</span><span class="p">,</span> <span class="n">vals</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">C</span><span class="p">()</span></div>


<span class="n">DIFF_FLUX_UNIT</span> <span class="o">=</span> <span class="s1">&#39;:math:`\mathrm</span><span class="si">{cm}</span><span class="s1">^{-2}~\mathrm</span><span class="si">{s}</span><span class="s1">^{-1}~\mathrm</span><span class="si">{MeV}</span><span class="s1">^{-1}`&#39;</span>
<span class="n">FLUX_UNIT</span> <span class="o">=</span> <span class="s1">&#39;:math:`\mathrm</span><span class="si">{cm}</span><span class="s1">^{-2}~\mathrm</span><span class="si">{s}</span><span class="s1">^{-1}`&#39;</span>
<span class="n">ENERGY_FLUX_UNIT</span> <span class="o">=</span> <span class="s1">&#39;:math:`\mathrm</span><span class="si">{MeV}</span><span class="s1">~\mathrm</span><span class="si">{cm}</span><span class="s1">^{-2}~\mathrm</span><span class="si">{s}</span><span class="s1">^{-1}`&#39;</span>

<span class="c1"># Options that are common to several sections</span>
<span class="n">common</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;multithread&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Split the calculation across number of processes set by nthread option.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;nthread&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Number of processes to create when multithread is True.  If None then one process &#39;</span>
                <span class="s1">&#39;will be created for each available core.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Dictionary defining the spatial/spectral properties of the test source. &#39;</span>
              <span class="s1">&#39;If model is None the test source will be a PointSource with an Index 2 power-law spectrum.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span>
    <span class="s1">&#39;free_background&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Leave background parameters free when performing the fit. If True then any &#39;</span>
                        <span class="s1">&#39;parameters that are currently free in the model will be fit simultaneously &#39;</span>
                        <span class="s1">&#39;with the source of interest.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;fix_shape&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Fix spectral shape parameters of the source of interest. If True then only &#39;</span>
                  <span class="s1">&#39;the normalization parameter will be fit.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;free_radius&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Free normalizations of background sources within this angular distance in degrees &#39;</span>
                    <span class="s1">&#39;from the source of interest.  If None then no sources will be freed.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;make_plots&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Generate diagnostic plots.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;use_weights&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Used weighted version of maps in making plots.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;write_fits&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Write the output to a FITS file.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;write_npy&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Write the output dictionary to a numpy file.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;loge_bounds&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Restrict the analysis to an energy range (emin,emax) in &#39;</span>
                     <span class="s1">&#39;log10(E/MeV) that is a subset of the analysis energy range. &#39;</span>
                     <span class="s1">&#39;By default the full analysis energy range will be used.  If &#39;</span>
                     <span class="s1">&#39;either emin/emax are None then only an upper/lower bound on &#39;</span>
                     <span class="s1">&#39;the energy range wil be applied.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># Options for defining input data files</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;evfile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Path to FT1 file or list of FT1 files.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;scfile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Path to FT2 (spacecraft) file.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;ltcube&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Path to livetime cube.  If none a livetime cube will be generated with ``gtmktime``.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;cacheft1&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Cache FT1 files when performing binned analysis.  If false then only the counts cube is retained.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># Options for data selection.</span>
<span class="n">selection</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;emin&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Minimum Energy (MeV)&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;emax&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Maximum Energy (MeV)&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;logemin&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Minimum Energy (log10(MeV))&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;logemax&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Maximum Energy (log10(MeV))&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;tmin&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Minimum time (MET).&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;tmax&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Maximum time (MET).&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;zmax&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Maximum zenith angle.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;evclass&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Event class selection.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;evtype&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Event type selection.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;convtype&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Conversion type selection.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;phasemin&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Minimum pulsar phase&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;phasemax&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Maximum pulsar phase&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Choose an object on which to center the ROI.  &#39;</span>
                     <span class="s1">&#39;This option takes precendence over ra/dec or glon/glat.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;ra&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;dec&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;glat&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;glon&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;radius&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Radius of data selection.  If none this will be automatically set from the ROI size.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;filter&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Filter string for ``gtmktime`` selection.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;roicut&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;no&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Options for ROI model.</span>
<span class="n">model</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;src_radius&#39;</span><span class="p">:</span>
        <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
         <span class="s1">&#39;Radius of circular region in degrees centered on the ROI that selects &#39;</span>
         <span class="s1">&#39;sources for inclusion in the model.  If this parameter is none then no &#39;</span>
         <span class="s1">&#39;selection is applied.  This selection is ORed with the ``src_roiwidth`` selection.&#39;</span><span class="p">,</span>
         <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;src_roiwidth&#39;</span><span class="p">:</span>
        <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
         <span class="s1">&#39;Width of square region in degrees centered on the ROI that selects &#39;</span>
         <span class="s1">&#39;sources for inclusion in the model.  If this parameter is none then no &#39;</span>
         <span class="s1">&#39;selection is applied.  This selection will be ORed with the ``src_radius`` selection.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;src_radius_roi&#39;</span><span class="p">:</span>
        <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
         <span class="s1">&#39;Half-width of ``src_roiwidth`` selection.  This parameter can be used in &#39;</span>
         <span class="s1">&#39;lieu of ``src_roiwidth``.&#39;</span><span class="p">,</span>
         <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;isodiff&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set the path to one or more isotropic templates.  A separate component will be &#39;</span>
                <span class="s1">&#39;generated for each item in this list.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;galdiff&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set the path to one or more galactic IEM mapcubes.  A separate component will be &#39;</span>
                <span class="s1">&#39;generated for each item in this list.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;limbdiff&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;diffuse&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;diffuse_xml&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;sources&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;extdir&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set a directory that will be searched for extended source FITS templates.  Template files in this directory &#39;</span>
               <span class="s1">&#39;will take precendence over catalog source templates with the same name.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;diffuse_dir&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;catalogs&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;merge_sources&#39;</span><span class="p">:</span>
        <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Merge properties of sources that appear in multiple &#39;</span>
         <span class="s1">&#39;source catalogs.  If merge_sources=false then subsequent sources with &#39;</span>
         <span class="s1">&#39;the same name will be ignored.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;assoc_xmatch_columns&#39;</span><span class="p">:</span>
        <span class="p">([</span><span class="s1">&#39;3FGL_Name&#39;</span><span class="p">],</span> <span class="s1">&#39;Choose a set of association columns on which to &#39;</span>
         <span class="s1">&#39;cross-match catalogs.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;extract_diffuse&#39;</span><span class="p">:</span> <span class="p">(</span>
        <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Extract a copy of all mapcube components centered on the ROI.&#39;</span><span class="p">,</span>
        <span class="nb">bool</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Options for configuring likelihood analysis</span>
<span class="n">gtlike</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;irfs&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set the IRF string.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;edisp&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Enable the correction for energy dispersion.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;edisp_bins&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Number of bins to use for energy correction.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;edisp_disable&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
                      <span class="s1">&#39;Provide a list of sources for which the edisp &#39;</span>
                      <span class="s1">&#39;correction should be disabled.&#39;</span><span class="p">,</span>
                      <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;minbinsz&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="s1">&#39;Set the minimum bin size used for resampling diffuse maps.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;rfactor&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;convolve&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;resample&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;srcmap&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set the source maps file.  When defined this file will be used instead of the &#39;</span>
               <span class="s1">&#39;local source maps file.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;bexpmap&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;bexpmap_roi&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;srcmap_base&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set the baseline source maps file.  This will be used to generate a scaled source map.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;bexpmap_base&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set the basline all-sky expoure map file.  This will be used to generate a scaled source map.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;bexpmap_roi_base&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set the basline ROI expoure map file.  This will be used to generate a scaled source map.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;use_external_srcmap&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Use an external precomputed source map file.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;use_scaled_srcmap&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Generate source map by scaling an external srcmap file.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;wmap&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Likelihood weights map.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;llscan_npts&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;Number of evaluation points to use when performing a likelihood scan.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;src_expscale&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Dictionary of exposure corrections for individual sources keyed to source name.  The exposure &#39;</span>
                     <span class="s1">&#39;for a given source will be scaled by this value.  A value of 1.0 corresponds to the nominal exposure.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span>
    <span class="s1">&#39;expscale&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Exposure correction that is applied to all sources in the analysis component.  &#39;</span>
                 <span class="s1">&#39;This correction is superseded by `src_expscale` if it is defined for a source.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># Options for generating livetime cubes</span>
<span class="n">ltcube</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;binsz&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;Set the angular bin size for generating livetime cubes.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;phibins&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Set the number of phi bins for generating livetime cubes.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;dcostheta&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.025</span><span class="p">,</span> <span class="s1">&#39;Set the inclination angle binning represented as the cosine of the off-axis angle.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;use_local_ltcube&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Generate a livetime cube in the vicinity of the ROI using interpolation. &#39;</span>
                         <span class="s1">&#39;This option disables LT cube generation with gtltcube.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># Options for binning.</span>
<span class="n">binning</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;projtype&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;WCS&#39;</span><span class="p">,</span> <span class="s1">&#39;Projection mode (WCS or HPX).&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;proj&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;AIT&#39;</span><span class="p">,</span> <span class="s1">&#39;Spatial projection for WCS mode.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;coordsys&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;CEL&#39;</span><span class="p">,</span> <span class="s1">&#39;Coordinate system of the spatial projection (CEL or GAL).&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;npix&#39;</span><span class="p">:</span>
        <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
         <span class="s1">&#39;Number of pixels.  If none then this will be set from ``roiwidth`` &#39;</span>
         <span class="s1">&#39;and ``binsz``.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;roiwidth&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span>
                 <span class="s1">&#39;Width of the ROI in degrees.  The number of pixels in each spatial dimension will be set from ``roiwidth`` / ``binsz`` (rounded up).&#39;</span><span class="p">,</span>
                 <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;binsz&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="s1">&#39;Spatial bin size in degrees.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;binsperdec&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;Number of energy bins per decade.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;enumbins&#39;</span><span class="p">:</span> <span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;Number of energy bins.  If none this will be inferred from energy &#39;</span>
        <span class="s1">&#39;range and ``binsperdec`` parameter.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;hpx_ordering_scheme&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;RING&#39;</span><span class="p">,</span> <span class="s1">&#39;HEALPix Ordering Scheme&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;hpx_order&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Order of the map (int between 0 and 12, included)&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;hpx_ebin&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Include energy binning&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Options related to I/O and output file bookkeeping</span>
<span class="n">fileio</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;outdir&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Path of the output directory.  If none this will default to the directory containing the configuration file.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;scratchdir&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;/scratch&#39;</span><span class="p">,</span> <span class="s1">&#39;Path to the scratch directory.  If ``usescratch`` is True then a temporary working directory &#39;</span>
                   <span class="s1">&#39;will be created under this directory.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;workdir&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Path to the working directory.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;logfile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Path to log file.  If None then log will be written to fermipy.log.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;savefits&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Save intermediate FITS files.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;workdir_regex&#39;</span><span class="p">:</span> <span class="p">([</span><span class="s1">&#39;\.fits$|\.fit$|\.xml$|\.npy$&#39;</span><span class="p">],</span>
                      <span class="s1">&#39;Stage files to the working directory that match at least one of the regular expressions in this list.  &#39;</span>
                      <span class="s1">&#39;This option only takes effect when ``usescratch`` is True.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;outdir_regex&#39;</span><span class="p">:</span> <span class="p">([</span><span class="s1">&#39;\.fits$|\.fit$|\.xml$|\.npy$|\.png$|\.pdf$|\.yaml$&#39;</span><span class="p">],</span>
                     <span class="s1">&#39;Stage files to the output directory that match at least one of the regular expressions in this list.  &#39;</span>
                     <span class="s1">&#39;This option only takes effect when ``usescratch`` is True.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;usescratch&#39;</span><span class="p">:</span> <span class="p">(</span>
        <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Run analysis in a temporary working directory under ``scratchdir``.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
<span class="p">}</span>

<span class="n">logging</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Prefix that will be appended to the logger name.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;chatter&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Set the chatter parameter of the STs.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;verbosity&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Options related to likelihood optimizer</span>
<span class="n">optimizer</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;optimizer&#39;</span><span class="p">:</span>
        <span class="p">(</span><span class="s1">&#39;MINUIT&#39;</span><span class="p">,</span> <span class="s1">&#39;Set the optimization algorithm to use when maximizing the &#39;</span>
                   <span class="s1">&#39;likelihood function.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;tol&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1E-3</span><span class="p">,</span> <span class="s1">&#39;Set the optimizer tolerance.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;max_iter&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;Maximum number of iterations for the Newtons method fitter.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;init_lambda&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1E-4</span><span class="p">,</span> <span class="s1">&#39;Initial value of damping parameter for step size calculation &#39;</span>
                    <span class="s1">&#39;when using the NEWTON fitter.  A value of zero disables damping.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;retries&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Set the number of times to retry the fit when the fit quality is less than ``min_fit_quality``.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;min_fit_quality&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Set the minimum fit quality.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;verbosity&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">fit_output</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;edm&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Estimated distance to maximum of log-likelihood function.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;fit_status&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Optimizer return code (0 = ok).&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">),</span>
    <span class="s1">&#39;fit_quality&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Fit quality parameter for MINUIT and NEWMINUIT optimizers (3 - Full accurate covariance matrix, &#39;</span>
                    <span class="s1">&#39;2 - Full matrix, but forced positive-definite (i.e. not accurate), &#39;</span>
                    <span class="s1">&#39;1 - Diagonal approximation only, not accurate, &#39;</span>
                    <span class="s1">&#39;0 - Error matrix not calculated at all)&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">),</span>
    <span class="s1">&#39;covariance&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Covariance matrix between free parameters of the fit.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">),</span>
    <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Correlation matrix between free parameters of the fit.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">),</span>
    <span class="s1">&#39;dloglike&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Improvement in log-likehood value.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;loglike&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Post-fit log-likehood value.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Vector of best-fit parameter values (unscaled).&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">),</span>
    <span class="s1">&#39;errors&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Vector of parameter errors (unscaled).&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">),</span>
    <span class="s1">&#39;config&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Copy of input configuration to this method.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># MC options</span>
<span class="n">mc</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;seed&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># ROI Optimization</span>
<span class="n">roiopt</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;npred_threshold&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;npred_frac&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;shape_ts_threshold&#39;</span><span class="p">:</span>
        <span class="p">(</span><span class="mf">25.0</span><span class="p">,</span> <span class="s1">&#39;Threshold on source TS used for determining the sources &#39;</span>
         <span class="s1">&#39;that will be fit in the third optimization step.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;max_free_sources&#39;</span><span class="p">:</span>
        <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Maximum number of sources that will be fit simultaneously in &#39;</span>
         <span class="s1">&#39;the first optimization step.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;skip&#39;</span><span class="p">:</span>
        <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;List of str source names to skip while optimizing.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">roiopt_output</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;loglike0&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Pre-optimization log-likelihood value.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;loglike1&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Post-optimization log-likelihood value.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;dloglike&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Improvement in log-likehood value.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;config&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Copy of input configuration to this method.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># Residual Maps</span>
<span class="n">residmap</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
    <span class="s1">&#39;exclude&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;List of sources that will be removed from the model when &#39;</span>
                <span class="s1">&#39;computing the residual map.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;loge_bounds&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;loge_bounds&#39;</span><span class="p">],</span>
    <span class="s1">&#39;make_plots&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;make_plots&#39;</span><span class="p">],</span>
    <span class="s1">&#39;use_weights&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;use_weights&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_fits&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_fits&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_npy&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_npy&#39;</span><span class="p">],</span>
<span class="p">}</span>

<span class="c1"># TS Map</span>
<span class="n">tsmap</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
    <span class="s1">&#39;exclude&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;List of sources that will be removed from the model when &#39;</span>
                <span class="s1">&#39;computing the TS map.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;multithread&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;multithread&#39;</span><span class="p">],</span>
    <span class="s1">&#39;nthread&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;nthread&#39;</span><span class="p">],</span>
    <span class="s1">&#39;max_kernel_radius&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="s1">&#39;Set the maximum radius of the test source kernel.  Using a &#39;</span>
                          <span class="s1">&#39;smaller value will speed up the TS calculation at the loss of &#39;</span>
                          <span class="s1">&#39;accuracy.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;loge_bounds&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;loge_bounds&#39;</span><span class="p">],</span>
    <span class="s1">&#39;make_plots&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;make_plots&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_fits&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_fits&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_npy&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_npy&#39;</span><span class="p">],</span>
<span class="p">}</span>

<span class="c1"># TS Cube</span>
<span class="n">tscube</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
    <span class="s1">&#39;exclude&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;List of sources that will be removed from the model when &#39;</span>
                <span class="s1">&#39;computing the TS map.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;do_sed&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Compute the energy bin-by-bin fits&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;nnorm&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Number of points in the likelihood v. normalization scan&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;norm_sigma&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="s1">&#39;Number of sigma to use for the scan range &#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;cov_scale_bb&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;Scale factor to apply to global fitting &#39;</span>
                     <span class="s1">&#39;cov. matrix in broadband fits. ( &lt; 0 -&gt; no prior ) &#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;cov_scale&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;Scale factor to apply to broadband fitting cov. &#39;</span>
                  <span class="s1">&#39;matrix in bin-by-bin fits ( &lt; 0 -&gt; fixed ) &#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;tol&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1E-3</span><span class="p">,</span> <span class="s1">&#39;Critetia for fit convergence (estimated vertical distance to min &lt; tol )&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;max_iter&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;Maximum number of iterations for the Newtons method fitter.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;tol_type&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Absoulte (0) or relative (1) criteria for convergence.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;remake_test_source&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;If true, recomputes the test source image (otherwise just shifts it)&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;st_scan_level&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Level to which to do ST-based fitting (for testing)&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;init_lambda&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Initial value of damping parameter for newton step size calculation.   A value of zero disables damping.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># Options for Source Finder</span>
<span class="n">sourcefind</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
    <span class="s1">&#39;min_separation&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span>
                       <span class="s1">&#39;Minimum separation in degrees between sources detected in each &#39;</span>
                       <span class="s1">&#39;iteration. The source finder will look for the maximum peak &#39;</span>
                       <span class="s1">&#39;in the TS map within a circular region of this radius.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;sqrt_ts_threshold&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="s1">&#39;Source threshold in sqrt(TS).  Only peaks with sqrt(TS) &#39;</span>
                          <span class="s1">&#39;exceeding this threshold will be used as seeds for new &#39;</span>
                          <span class="s1">&#39;sources.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;max_iter&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Maximum number of source finding iterations.  The source &#39;</span>
                 <span class="s1">&#39;finder will continue adding sources until no additional &#39;</span>
                 <span class="s1">&#39;peaks are found or the number of iterations exceeds this &#39;</span>
                 <span class="s1">&#39;number.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;sources_per_iter&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Maximum number of sources that will be added in each &#39;</span>
                         <span class="s1">&#39;iteration.  If the number of detected peaks in a given &#39;</span>
                         <span class="s1">&#39;iteration is larger than this number, only the N peaks with &#39;</span>
                         <span class="s1">&#39;the largest TS will be used as seeds for the current &#39;</span>
                         <span class="s1">&#39;iteration.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;tsmap_fitter&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;tsmap&#39;</span><span class="p">,</span> <span class="s1">&#39;Set the method for generating the TS map.  Valid options are tsmap or tscube.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;free_params&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;multithread&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;multithread&#39;</span><span class="p">],</span>
    <span class="s1">&#39;nthread&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;nthread&#39;</span><span class="p">],</span>
<span class="p">}</span>

<span class="c1"># Options for lightcurve analysis</span>
<span class="n">lightcurve</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;outdir&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;Store all data in this directory (e.g. &quot;30days&quot;). If None then use current directory.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;use_local_ltcube&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Generate a fast LT cube.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;use_scaled_srcmap&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Generate approximate source maps for each time bin by scaling &#39;</span>
                          <span class="s1">&#39;the current source maps by the exposure ratio with respect to that time bin.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;save_bin_data&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Save analysis directories for individual time bins.  If False then only &#39;</span>
                      <span class="s1">&#39;the analysis results table will be saved.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;binsz&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">86400.0</span><span class="p">,</span> <span class="s1">&#39;Set the lightcurve bin size in seconds.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;shape_ts_threshold&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">16.0</span><span class="p">,</span> <span class="s1">&#39;Set the TS threshold at which shape parameters of &#39;</span>
                           <span class="s1">&#39;sources will be freed.  If a source is detected with TS less than this &#39;</span>
                           <span class="s1">&#39;value then its shape parameters will be fixed to values derived from the &#39;</span>
                           <span class="s1">&#39;analysis of the full time range.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;nbins&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set the number of lightcurve bins.  The total time range will be evenly &#39;</span>
              <span class="s1">&#39;split into this number of time bins.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;time_bins&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set the lightcurve bin edge sequence in MET.  This option &#39;</span>
                  <span class="s1">&#39;takes precedence over binsz and nbins.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;free_background&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;free_background&#39;</span><span class="p">],</span>
    <span class="s1">&#39;free_radius&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;free_radius&#39;</span><span class="p">],</span>
    <span class="s1">&#39;free_sources&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;List of sources to be freed.  These sources will be added to the list of sources &#39;</span>
                     <span class="s1">&#39;satisfying the free_radius selection.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;free_params&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set the parameters of the source of interest that will be re-fit in each time bin. &#39;</span>
                    <span class="s1">&#39;If this list is empty then all parameters will be freed.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;max_free_sources&#39;</span><span class="p">:</span>
        <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Maximum number of sources that will be fit simultaneously with the source of interest.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;make_plots&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;make_plots&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_fits&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_fits&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_npy&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_npy&#39;</span><span class="p">],</span>
    <span class="s1">&#39;multithread&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;multithread&#39;</span><span class="p">],</span>
    <span class="s1">&#39;nthread&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;nthread&#39;</span><span class="p">],</span>
    <span class="s1">&#39;systematic&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.02</span><span class="p">,</span> <span class="s1">&#39;Systematic correction factor for TS:subscript:`var`. See Sect. 3.6 in 2FGL for details.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># Output for lightcurve Analysis</span>
<span class="n">lightcurve_output</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">((</span>
    <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Name of Source&#39;&#39;, &#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;tmin&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Lower edge of time bin in MET.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;tmax&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Upper edge of time bin in MET.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;fit_success&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Did the likelihood fit converge? True if yes.&#39;</span><span class="p">,</span>
                     <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">,</span> <span class="p">({},</span> <span class="s1">&#39;Copy of the input configuration to this method.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ts_var&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;TS of variability. Should be distributed as :math:`\chi^2` with &#39;</span>
                <span class="s1">&#39;:math:`n-1` degrees of freedom, where :math:`n` is the number of time bins.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
<span class="p">))</span>

<span class="c1"># Options for SED analysis</span>
<span class="n">sed</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;bin_index&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;Spectral index that will be use when fitting the energy distribution within an energy bin.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;use_local_index&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Use a power-law approximation to the shape of the global spectrum in &#39;</span>
                        <span class="s1">&#39;each bin.  If this is false then a constant index set to `bin_index` &#39;</span>
                        <span class="s1">&#39;will be used.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;free_background&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;free_background&#39;</span><span class="p">],</span>
    <span class="s1">&#39;free_radius&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;free_radius&#39;</span><span class="p">],</span>
    <span class="s1">&#39;free_pars&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Set the parameters of the source of interest that will be freed when performing &#39;</span>
                  <span class="s1">&#39;the global fit.  By default all parameters will be freed.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;ul_confidence&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="s1">&#39;Confidence level for flux upper limit.&#39;</span><span class="p">,</span>
                      <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;cov_scale&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="s1">&#39;Scale factor that sets the strength of the prior on nuisance &#39;</span>
                  <span class="s1">&#39;parameters that are free.  Setting this to None disables the prior.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;make_plots&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;make_plots&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_fits&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_fits&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_npy&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_npy&#39;</span><span class="p">],</span>
<span class="p">}</span>

<span class="c1"># Output for SED analysis</span>
<span class="n">sed_output</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">((</span>
    <span class="p">(</span><span class="s1">&#39;loge_min&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Lower edges of SED energy bins (log10(E/MeV)).&#39;</span><span class="p">,</span>
                  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loge_max&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Upper edges of SED energy bins (log10(E/MeV)).&#39;</span><span class="p">,</span>
                  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loge_ctr&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Centers of SED energy bins (log10(E/MeV)).&#39;</span><span class="p">,</span>
                  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loge_ref&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Reference energies of SED energy bins (log10(E/MeV)).&#39;</span><span class="p">,</span>
                  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;e_min&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Lower edges of SED energy bins (MeV).&#39;</span><span class="p">,</span>
               <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;e_max&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Upper edges of SED energy bins (MeV).&#39;</span><span class="p">,</span>
               <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;e_ctr&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Centers of SED energy bins (MeV).&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;e_ref&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Reference energies of SED energy bins (MeV).&#39;</span><span class="p">,</span>
               <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ref_flux&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Flux of the reference model in each bin (</span><span class="si">%s</span><span class="s1">).&#39;</span> <span class="o">%</span>
                  <span class="n">FLUX_UNIT</span><span class="p">,</span>  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ref_eflux&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Energy flux of the reference model in each bin (</span><span class="si">%s</span><span class="s1">).&#39;</span> <span class="o">%</span>
                   <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ref_dnde&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Differential flux of the reference model evaluated at the bin center (</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span>
                  <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span>  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ref_dnde_e_min&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Differential flux of the reference model evaluated at the lower bin edge (</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span>
                        <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span>  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ref_dnde_e_max&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Differential flux of the reference model evaluated at the upper bin edge (</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span>
                        <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span>  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ref_e2dnde&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;E^2 x the differential flux of the reference model evaluated at the bin center (</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span>
                    <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ref_npred&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Number of predicted counts in the reference model in each bin.&#39;</span><span class="p">,</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Normalization in each bin in units of the reference model.&#39;</span><span class="p">,</span>
              <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Flux in each bin (</span><span class="si">%s</span><span class="s1">).&#39;</span> <span class="o">%</span>
              <span class="n">FLUX_UNIT</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Energy flux in each bin (</span><span class="si">%s</span><span class="s1">).&#39;</span> <span class="o">%</span>
               <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Differential flux in each bin (</span><span class="si">%s</span><span class="s1">).&#39;</span> <span class="o">%</span>
              <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;e2dnde&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;E^2 x the differential flux in each bin (</span><span class="si">%s</span><span class="s1">).&#39;</span> <span class="o">%</span>
                <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;1-sigma error on dnde evaluated from likelihood curvature.&#39;</span><span class="p">,</span>
                  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde_err_lo&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Lower 1-sigma error on dnde evaluated from the profile likelihood (MINOS errors).&#39;</span><span class="p">,</span>
                     <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde_err_hi&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Upper 1-sigma error on dnde evaluated from the profile likelihood (MINOS errors).&#39;</span><span class="p">,</span>
                     <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;95% CL upper limit on dnde evaluated from the profile likelihood (MINOS errors).&#39;</span><span class="p">,</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde_ul&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Upper limit on dnde evaluated from the profile likelihood using a CL = ``ul_confidence``.&#39;</span><span class="p">,</span>
                 <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;e2dnde_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;1-sigma error on e2dnde evaluated from likelihood curvature.&#39;</span><span class="p">,</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;e2dnde_err_lo&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Lower 1-sigma error on e2dnde evaluated from the profile likelihood (MINOS errors).&#39;</span><span class="p">,</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;e2dnde_err_hi&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Upper 1-sigma error on e2dnde evaluated from the profile likelihood (MINOS errors).&#39;</span><span class="p">,</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;e2dnde_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;95% CL upper limit on e2dnde evaluated from the profile likelihood (MINOS errors).&#39;</span><span class="p">,</span>
                     <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;e2dnde_ul&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Upper limit on e2dnde evaluated from the profile likelihood using a CL = ``ul_confidence``.&#39;</span><span class="p">,</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ts&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Test statistic.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loglike&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Log-likelihood of model for the best-fit amplitude.&#39;</span><span class="p">,</span>
                 <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;npred&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Number of model counts.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;fit_quality&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Fit quality parameter for MINUIT and NEWMINUIT optimizers (3 - Full accurate covariance matrix, &#39;</span>
                     <span class="s1">&#39;2 - Full matrix, but forced positive-definite (i.e. not accurate), &#39;</span>
                     <span class="s1">&#39;1 - Diagonal approximation only, not accurate, &#39;</span>
                     <span class="s1">&#39;0 - Error matrix not calculated at all).&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;fit_status&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Fit status parameter (0=ok).&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Spectral index of the power-law model used to fit this bin.&#39;</span><span class="p">,</span>
               <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;norm_scan&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Array of NxM normalization values for the profile likelihood scan in N &#39;</span>
                   <span class="s1">&#39;energy bins and M scan points.  A row-wise multiplication with &#39;</span>
                   <span class="s1">&#39;any of ``ref`` columns can be used to convert this matrix to the &#39;</span>
                   <span class="s1">&#39;respective unit.&#39;</span><span class="p">,</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dloglike_scan&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Array of NxM delta-loglikelihood values for the profile likelihood &#39;</span>
                       <span class="s1">&#39;scan in N energy bins and M scan points.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loglike_scan&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Array of NxM loglikelihood values for the profile likelihood scan &#39;</span>
                      <span class="s1">&#39;in N energy bins and M scan points.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;param_covariance&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Covariance matrix for the best-fit spectral parameters of the source.&#39;</span><span class="p">,</span>
                          <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;param_names&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Array of names for the parameters in the global spectral parameterization of this source.&#39;</span><span class="p">,</span>
                     <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;param_values&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Array of parameter values.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;param_errors&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Array of parameter errors.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;model_flux&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Dictionary containing the differential flux uncertainty &#39;</span>
                    <span class="s1">&#39;band of the best-fit global spectral parameterization for the &#39;</span>
                    <span class="s1">&#39;source.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Copy of input configuration to this method.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>
<span class="p">))</span>

<span class="c1"># Options for extension analysis</span>
<span class="n">extension</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;spatial_model&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;RadialGaussian&#39;</span><span class="p">,</span> <span class="s1">&#39;Spatial model that will be used to test the source&#39;</span>
                      <span class="s1">&#39;extension.  The spatial scale parameter of the &#39;</span>
                      <span class="s1">&#39;model will be set such that the 68</span><span class="si">% c</span><span class="s1">ontainment radius of &#39;</span>
                      <span class="s1">&#39;the model is equal to the width parameter.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Sequence of values in degrees for the likelihood scan over spatial extension &#39;</span>
              <span class="s1">&#39;(68</span><span class="si">% c</span><span class="s1">ontainment radius).  If this argument is None then the scan points will &#39;</span>
              <span class="s1">&#39;be determined from width_min/width_max/width_nstep.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;fit_position&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Perform a simultaneous fit to the source position and extension.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;width_min&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="s1">&#39;Minimum value in degrees for the likelihood scan over spatial extent.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;width_max&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;Maximum value in degrees for the likelihood scan over spatial extent.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;width_nstep&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="s1">&#39;Number of scan points between width_min and width_max. &#39;</span>
                    <span class="s1">&#39;Scan points will be spaced evenly on a logarithmic scale &#39;</span>
                    <span class="s1">&#39;between `width_min` and `width_max`.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;free_background&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;free_background&#39;</span><span class="p">],</span>
    <span class="s1">&#39;fix_shape&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;fix_shape&#39;</span><span class="p">],</span>
    <span class="s1">&#39;free_radius&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;free_radius&#39;</span><span class="p">],</span>
    <span class="s1">&#39;fit_ebin&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Perform a fit for the angular extension in each analysis energy bin.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;update&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Update this source with the best-fit model for spatial &#39;</span>
               <span class="s1">&#39;extension if TS_ext &gt; ``tsext_threshold``.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;save_model_map&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Save model counts cubes for the best-fit model of extension.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;sqrt_ts_threshold&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Threshold on sqrt(TS_ext) that will be applied when ``update`` is True.  If None then no&#39;</span>
                          <span class="s1">&#39;threshold is applied.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;psf_scale_fn&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Tuple of two vectors (logE,f) defining an energy-dependent PSF scaling function &#39;</span>
                     <span class="s1">&#39;that will be applied when building spatial models for the source of interest.  &#39;</span>
                     <span class="s1">&#39;The tuple (logE,f) defines the fractional corrections f at the sequence of energies &#39;</span>
                     <span class="s1">&#39;logE = log10(E/MeV) where f=0 corresponds to no correction.  The correction function f(E) is evaluated &#39;</span>
                     <span class="s1">&#39;by linearly interpolating the fractional correction factors f in log(E).  The &#39;</span>
                     <span class="s1">&#39;corrected PSF is given by P</span><span class="se">\&#39;</span><span class="s1">(x;E) = P(x/(1+f(E));E) where x is the angular separation.&#39;</span><span class="p">,</span>
                     <span class="nb">tuple</span><span class="p">),</span>
    <span class="s1">&#39;make_tsmap&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Make a TS map for the source of interest.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;tsmap_fitter&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;tsmap&#39;</span><span class="p">,</span> <span class="s1">&#39;Set the method for generating the TS map.  Valid options are tsmap or tscube.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;make_plots&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;make_plots&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_fits&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_fits&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_npy&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_npy&#39;</span><span class="p">],</span>
<span class="p">}</span>

<span class="c1"># Options for localization analysis</span>
<span class="n">localize</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;nstep&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Number of steps in longitude/latitude that will be taken &#39;</span>
              <span class="s1">&#39;when refining the source position.  The bounds of the scan &#39;</span>
              <span class="s1">&#39;range are set to the 99% positional uncertainty as &#39;</span>
              <span class="s1">&#39;determined from the TS map peak fit.  The total number of &#39;</span>
              <span class="s1">&#39;sampling points will be nstep**2.&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span>
    <span class="s1">&#39;dtheta_max&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;Half-width of the search region in degrees used for the first pass of the localization search.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;free_background&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;free_background&#39;</span><span class="p">],</span>
    <span class="s1">&#39;fix_shape&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;fix_shape&#39;</span><span class="p">],</span>
    <span class="s1">&#39;free_radius&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;free_radius&#39;</span><span class="p">],</span>
    <span class="s1">&#39;update&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;Update the source model with the best-fit position.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
    <span class="s1">&#39;tsmap_fitter&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;tsmap&#39;</span><span class="p">,</span> <span class="s1">&#39;Set the method for generating the TS map.  Valid options are tsmap or tscube.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;make_plots&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;make_plots&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_fits&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_fits&#39;</span><span class="p">],</span>
    <span class="s1">&#39;write_npy&#39;</span><span class="p">:</span> <span class="n">common</span><span class="p">[</span><span class="s1">&#39;write_npy&#39;</span><span class="p">],</span>
<span class="p">}</span>

<span class="c1"># Output for localization analysis</span>
<span class="n">localize_output</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">((</span>

    <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Name of source.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Name of output FITS file.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">,</span> <span class="p">({},</span> <span class="s1">&#39;Copy of the input configuration to this method.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>

    <span class="c1"># Position</span>
    <span class="p">(</span><span class="s1">&#39;ra&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Right ascension of best-fit position (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dec&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Declination of best-fit position (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;glon&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Galactic Longitude of best-fit position (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;glat&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Galactic Latitude of best-fit position (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;xpix&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Longitude pixel coordinate of best-fit position.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ypix&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Latitude pixel coordinate of best-fit position.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;deltax&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Longitude offset from old position (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;deltay&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Latitude offset from old position (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;skydir&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">astropy</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">SkyCoord</span><span class="p">,</span>
                <span class="s1">&#39;`~astropy.coordinates.SkyCoord`&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ra_preloc&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Right ascension of pre-localization position (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dec_preloc&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Declination of pre-localization position (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;glon_preloc&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                     <span class="s1">&#39;Galactic Longitude of pre-localization position (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;glat_preloc&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                     <span class="s1">&#39;Galactic Latitude of pre-localization position (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>

    <span class="c1"># Positional Errors</span>
    <span class="p">(</span><span class="s1">&#39;ra_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Std. deviation of positional uncertainty in right ascension (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dec_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Std. deviation of positional uncertainty in declination (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;glon_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Std. deviation of positional uncertainty in galactic longitude (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;glat_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Std. deviation of positional uncertainty in galactic latitude (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_offset&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Angular offset (deg) between the old and new (localized) source positions.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;1-sigma positional uncertainty (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_r68&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;68% positional uncertainty (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_r95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;95% positional uncertainty (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_r99&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;99% positional uncertainty (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_err_semimajor&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                           <span class="s1">&#39;1-sigma uncertainty (deg) along major axis of uncertainty ellipse.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_err_semiminor&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                           <span class="s1">&#39;1-sigma uncertainty (deg) along minor axis of uncertainty ellipse.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_angle&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Position angle of uncertainty ellipse with respect to major axis.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_ecc&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                 <span class="s1">&#39;Eccentricity of uncertainty ellipse defined as sqrt(1-b**2/a**2).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_ecc2&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                  <span class="s1">&#39;Eccentricity of uncertainty ellipse defined as sqrt(a**2/b**2-1).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_gal_cov&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
                     <span class="s1">&#39;Covariance matrix of positional uncertainties in local projection in galactic coordinates.&#39;</span><span class="p">,</span>
                     <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_gal_corr&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
                      <span class="s1">&#39;Correlation matrix of positional uncertainties in local projection in galactic coordinates.&#39;</span><span class="p">,</span>
                      <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_cel_cov&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
                     <span class="s1">&#39;Covariance matrix of positional uncertainties in local projection in celestial coordinates.&#39;</span><span class="p">,</span>
                     <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pos_cel_corr&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
                      <span class="s1">&#39;Correlation matrix of positional uncertainties in local projection in celestial coordinates.&#39;</span><span class="p">,</span>
                      <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>

    <span class="c1"># Maps</span>
    <span class="p">(</span><span class="s1">&#39;tsmap&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fermipy</span><span class="o">.</span><span class="n">skymap</span><span class="o">.</span><span class="n">Map</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;tsmap_peak&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fermipy</span><span class="o">.</span><span class="n">skymap</span><span class="o">.</span><span class="n">Map</span><span class="p">)),</span>

    <span class="c1"># Miscellaneous</span>
    <span class="p">(</span><span class="s1">&#39;loglike_init&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Log-Likelihood of model before localization.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loglike_base&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Log-Likelihood of model after initial spectral fit.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loglike_loc&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Log-Likelihood of model after localization.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dloglike_loc&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                      <span class="s1">&#39;Difference in log-likelihood before and after localization.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;fit_success&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;fit_inbounds&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;fit_init&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;fit_scan&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>

<span class="p">))</span>

<span class="c1"># Output for extension analysis</span>
<span class="n">extension_output</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">((</span>

    <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Name of source.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Name of output FITS file.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">,</span> <span class="p">({},</span> <span class="s1">&#39;Copy of the input configuration to this method.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>

    <span class="c1"># Extension</span>
    <span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Vector of width (intrinsic 68</span><span class="si">% c</span><span class="s1">ontainment radius) values (deg).&#39;</span><span class="p">,</span>
               <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dloglike&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Delta-log-likelihood values for each point in the profile likelihood scan.&#39;</span><span class="p">,</span>
                  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loglike&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Log-likelihood values for each point in the scan over the spatial extension.&#39;</span><span class="p">,</span>
                 <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loglike_ptsrc&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                       <span class="s1">&#39;Log-Likelihood value of the best-fit point-source model.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loglike_ext&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Log-Likelihood of the best-fit extended source model.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loglike_init&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Log-Likelihood of model before extension fit.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loglike_base&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Log-Likelihood of model after initial spectral fit.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ext&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Best-fit extension (68</span><span class="si">% c</span><span class="s1">ontainment radius) (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ext_err_hi&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                    <span class="s1">&#39;Upper (1-sigma) error on the best-fit extension (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ext_err_lo&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                    <span class="s1">&#39;Lower (1-sigma) error on the best-fit extension (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ext_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Symmetric (1-sigma) error on the best-fit extension (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ext_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;95% CL upper limit on the spatial extension (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ts_ext&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Test statistic for the extension hypothesis.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>

    <span class="c1"># Extension vs. Energy</span>
    <span class="p">(</span><span class="s1">&#39;ebin_e_min&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_e_ctr&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_e_max&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_ext&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Best-fit extension as measured in each energy bin (intrinsic 68</span><span class="si">% c</span><span class="s1">ontainment radius) (deg).&#39;</span><span class="p">,</span>
                  <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_ext_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
                      <span class="s1">&#39;Symmetric (1-sigma) error on best-fit extension in each energy bin (deg).&#39;</span><span class="p">,</span>
                      <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_ext_err_hi&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
                         <span class="s1">&#39;Upper (1-sigma) error on best-fit extension in each energy bin (deg).&#39;</span><span class="p">,</span>
                         <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_ext_err_lo&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
                         <span class="s1">&#39;Lower (1-sigma) error on best-fit extension in each energy bin (deg).&#39;</span><span class="p">,</span>
                         <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_ext_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
                       <span class="s1">&#39;95% CL upper limit on best-fit extension in each energy bin (deg).&#39;</span><span class="p">,</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_ts_ext&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
                     <span class="s1">&#39;Test statistic for extension hypothesis in each energy bin.&#39;</span><span class="p">,</span>
                     <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_dloglike&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Delta-log-likelihood values for scan over the spatial extension in each energy bin.&#39;</span><span class="p">,</span>
                       <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_loglike&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Log-likelihood values for scan over the spatial extension in each energy bin.&#39;</span><span class="p">,</span>
                      <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_loglike_ptsrc&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
                            <span class="s1">&#39;Log-Likelihood value of the best-fit point-source model in each energy bin.&#39;</span><span class="p">,</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ebin_loglike_ext&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Log-Likelihood value of the best-fit extended source model in each energy bin.&#39;</span><span class="p">,</span>
                          <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>

    <span class="c1"># Position</span>
    <span class="p">(</span><span class="s1">&#39;ra&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;ra&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;dec&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;dec&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;glon&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;glon&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;glat&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;glat&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;ra_err&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;ra_err&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;dec_err&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;dec_err&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;glon_err&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;glon_err&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;glat_err&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;glat_err&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_offset&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_offset&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_err&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_err&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_r68&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_r68&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_r95&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_r95&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_r99&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_r99&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_err_semimajor&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_err_semimajor&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_err_semiminor&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_err_semiminor&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_angle&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_angle&#39;</span><span class="p">]),</span>

    <span class="c1"># Maps</span>
    <span class="p">(</span><span class="s1">&#39;tsmap&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fermipy</span><span class="o">.</span><span class="n">skymap</span><span class="o">.</span><span class="n">Map</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ptsrc_tot_map&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fermipy</span><span class="o">.</span><span class="n">skymap</span><span class="o">.</span><span class="n">Map</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ptsrc_src_map&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fermipy</span><span class="o">.</span><span class="n">skymap</span><span class="o">.</span><span class="n">Map</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ptsrc_bkg_map&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fermipy</span><span class="o">.</span><span class="n">skymap</span><span class="o">.</span><span class="n">Map</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ext_tot_map&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fermipy</span><span class="o">.</span><span class="n">skymap</span><span class="o">.</span><span class="n">Map</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ext_src_map&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fermipy</span><span class="o">.</span><span class="n">skymap</span><span class="o">.</span><span class="n">Map</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ext_bkg_map&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fermipy</span><span class="o">.</span><span class="n">skymap</span><span class="o">.</span><span class="n">Map</span><span class="p">)),</span>

    <span class="c1"># Miscellaneous</span>
    <span class="p">(</span><span class="s1">&#39;source_fit&#39;</span><span class="p">,</span> <span class="p">({},</span> <span class="s1">&#39;Dictionary with parameters of the best-fit extended source model.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>
<span class="p">))</span>

<span class="c1"># Options for plotting</span>
<span class="n">plotting</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;loge_bounds&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;catalogs&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;graticule_radii&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Define a list of radii at which circular graticules will be drawn.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;cmap&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;magma&#39;</span><span class="p">,</span> <span class="s1">&#39;Set the colormap for 2D plots.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;cmap_resid&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;RdBu_r&#39;</span><span class="p">,</span> <span class="s1">&#39;Set the colormap for 2D residual plots.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
    <span class="s1">&#39;figsize&#39;</span><span class="p">:</span> <span class="p">([</span><span class="mf">8.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">],</span> <span class="s1">&#39;Set the default figure size.&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span>
    <span class="s1">&#39;label_ts_threshold&#39;</span><span class="p">:</span>
        <span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="s1">&#39;TS threshold for labeling sources in sky maps.  If None then no sources will be labeled.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
    <span class="s1">&#39;interactive&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Enable interactive mode.  If True then plots will be drawn after each plotting command.&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># Source dictionary</span>


<span class="n">source_meta_output</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">((</span>
    <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Name of the source.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;Source_Name&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Name of the source.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;SpatialModel&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Spatial model.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;SpatialWidth&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Spatial size parameter.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;SpatialType&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Spatial type string.  This corresponds to the type attribute of &#39;</span>
                     <span class="s1">&#39;the spatialModel component in the XML model.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;SourceType&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Source type string (PointSource or DiffuseSource).&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;SpectrumType&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Spectrum type string.  This corresponds to the type attribute of &#39;</span>
                      <span class="s1">&#39;the spectrum component in the XML model (e.g. PowerLaw, LogParabola, etc.).&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;Spatial_Filename&#39;</span><span class="p">,</span>
     <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Path to spatial template associated to this source.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;Spectrum_Filename&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
                           <span class="s1">&#39;Path to file associated to the spectral model of this source.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;correlation&#39;</span><span class="p">,</span> <span class="p">({},</span> <span class="s1">&#39;Dictionary of correlation coefficients.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;model_counts&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Vector of predicted counts for this source in each analysis energy bin.&#39;</span><span class="p">,</span>
                      <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;model_counts_wt&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Vector of predicted counts for this source in each analysis energy bin.&#39;</span><span class="p">,</span>
                         <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;sed&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Output of SED analysis.  See :ref:`sed` for more information.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>
<span class="p">))</span>

<span class="n">source_pos_output</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">((</span>
    <span class="p">(</span><span class="s1">&#39;ra&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Right ascension of the source (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dec&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Declination of the source (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;glon&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Galactic longitude of the source (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;glat&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Galactic latitude of the source (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ra_err&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;ra_err&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;dec_err&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;dec_err&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;glon_err&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;glon_err&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;glat_err&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;glat_err&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_err&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_err&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_r68&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_r68&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_r95&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_r95&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_r99&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_r99&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_err_semimajor&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_err_semimajor&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_err_semiminor&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_err_semiminor&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_angle&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_angle&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_gal_cov&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_gal_cov&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_gal_corr&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_gal_corr&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_cel_cov&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_cel_cov&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;pos_cel_corr&#39;</span><span class="p">,</span> <span class="n">localize_output</span><span class="p">[</span><span class="s1">&#39;pos_cel_corr&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;offset_ra&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Right ascension offset from ROI center in local celestial projection (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;offset_dec&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Declination offset from ROI center in local celestial projection (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;offset_glon&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Galactic longitude offset from ROI center in local galactic projection (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;offset_glat&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Galactic latitude offset from ROI center in local galactic projection (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;offset_roi_edge&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Distance from the edge of the ROI (deg).  Negative (positive) values &#39;</span>
                         <span class="s1">&#39;indicate locations inside (outside) the ROI.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Angular offset from ROI center (deg).&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
<span class="p">))</span>

<span class="n">source_flux_output</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">((</span>
    <span class="p">(</span><span class="s1">&#39;param_names&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;S32&#39;</span><span class="p">),</span>
                     <span class="s1">&#39;Names of spectral parameters.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;param_values&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                      <span class="s1">&#39;Spectral parameter values.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;param_errors&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                      <span class="s1">&#39;Spectral parameters errors.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;ts&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Source test statistic.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loglike&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Log-likelihood of the model evaluated at the best-fit normalization of the source.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;loglike_scan&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="s1">&#39;Log-likelihood values for scan of source normalization.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dloglike_scan&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="s1">&#39;Delta Log-likelihood values for scan of source normalization.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux_scan&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="s1">&#39;Energy flux values for scan of source normalization.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux_scan&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="s1">&#39;Flux values for scan of source normalization.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;norm_scan&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="s1">&#39;Normalization parameters values for scan of source normalization.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;npred&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Number of predicted counts from this source integrated over the analysis energy range.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;npred_wt&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Number of predicted counts from this source integrated over the analysis energy range.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;pivot_energy&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Decorrelation energy in MeV.&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Photon flux (</span><span class="si">%s</span><span class="s1">) integrated over analysis energy range&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
              <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux100&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Photon flux (</span><span class="si">%s</span><span class="s1">) integrated from 100 MeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
                 <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux1000&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Photon flux (</span><span class="si">%s</span><span class="s1">) integrated from 1 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
                  <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux10000&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Photon flux (</span><span class="si">%s</span><span class="s1">) integrated from 10 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
                   <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Photon flux uncertainty (</span><span class="si">%s</span><span class="s1">) integrated over analysis energy range&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
                  <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux100_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Photon flux uncertainty (</span><span class="si">%s</span><span class="s1">) integrated from 100 MeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
                     <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux1000_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Photon flux uncertainty (</span><span class="si">%s</span><span class="s1">) integrated from 1 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
                      <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux10000_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Photon flux uncertainty (</span><span class="si">%s</span><span class="s1">) integrated from 10 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
                       <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;95%&#39;</span> <span class="o">+</span> <span class="s1">&#39; CL upper limit on the photon flux (</span><span class="si">%s</span><span class="s1">) integrated over analysis energy range&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
                   <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux100_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;95%&#39;</span> <span class="o">+</span> <span class="s1">&#39; CL upper limit on the photon flux (</span><span class="si">%s</span><span class="s1">) integrated from 100 MeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
                      <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux1000_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;95%&#39;</span> <span class="o">+</span> <span class="s1">&#39; CL upper limit on the photon flux (</span><span class="si">%s</span><span class="s1">) integrated from 1 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
                       <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;flux10000_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;95%&#39;</span> <span class="o">+</span> <span class="s1">&#39; CL upper limit on the photon flux (</span><span class="si">%s</span><span class="s1">) integrated from 10 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">FLUX_UNIT</span><span class="p">,</span>
                        <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Energy flux (</span><span class="si">%s</span><span class="s1">) integrated over analysis energy range&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
               <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux100&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Energy flux (</span><span class="si">%s</span><span class="s1">) integrated from 100 MeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
                  <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux1000&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Energy flux (</span><span class="si">%s</span><span class="s1">) integrated from 1 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
                   <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux10000&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Energy flux (</span><span class="si">%s</span><span class="s1">) integrated from 10 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
                    <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Energy flux uncertainty (</span><span class="si">%s</span><span class="s1">) integrated over analysis energy range&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
                   <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux100_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Energy flux uncertainty (</span><span class="si">%s</span><span class="s1">) integrated from 100 MeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
                      <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux1000_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Energy flux uncertainty (</span><span class="si">%s</span><span class="s1">) integrated from 1 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
                       <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux10000_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Energy flux uncertainty (</span><span class="si">%s</span><span class="s1">) integrated from 10 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
                        <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;95%&#39;</span> <span class="o">+</span> <span class="s1">&#39; CL upper limit on the energy flux (</span><span class="si">%s</span><span class="s1">) integrated over analysis energy range&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
                    <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux100_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;95%&#39;</span> <span class="o">+</span> <span class="s1">&#39; CL upper limit on the energy flux (</span><span class="si">%s</span><span class="s1">) integrated from 100 MeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
                       <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux1000_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;95%&#39;</span> <span class="o">+</span> <span class="s1">&#39; CL upper limit on the energy flux (</span><span class="si">%s</span><span class="s1">) integrated from 1 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
                        <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;eflux10000_ul95&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;95%&#39;</span> <span class="o">+</span> <span class="s1">&#39; CL upper limit on the energy flux (</span><span class="si">%s</span><span class="s1">) integrated from 10 GeV to 316 GeV.&#39;</span> <span class="o">%</span> <span class="n">ENERGY_FLUX_UNIT</span><span class="p">,</span>
                         <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Differential photon flux (</span><span class="si">%s</span><span class="s1">) evaluated at the pivot energy.&#39;</span> <span class="o">%</span> <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span>
              <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde100&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Differential photon flux (</span><span class="si">%s</span><span class="s1">) evaluated at 100 MeV.&#39;</span> <span class="o">%</span> <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span>
                 <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde1000&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Differential photon flux (</span><span class="si">%s</span><span class="s1">) evaluated at 1 GeV.&#39;</span> <span class="o">%</span> <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span>
                  <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde10000&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Differential photon flux (</span><span class="si">%s</span><span class="s1">) evaluated at 10 GeV.&#39;</span> <span class="o">%</span> <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span>
                   <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Differential photon flux uncertainty (</span><span class="si">%s</span><span class="s1">) evaluated at the pivot energy.&#39;</span> <span class="o">%</span> <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span>
                  <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde100_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Differential photon flux uncertainty (</span><span class="si">%s</span><span class="s1">) evaluated at 100 MeV.&#39;</span> <span class="o">%</span> <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span>
                     <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde1000_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Differential photon flux uncertainty (</span><span class="si">%s</span><span class="s1">) evaluated at 1 GeV.&#39;</span> <span class="o">%</span> <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span>
                      <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde10000_err&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Differential photon flux uncertainty (</span><span class="si">%s</span><span class="s1">) evaluated at 10 GeV.&#39;</span> <span class="o">%</span> <span class="n">DIFF_FLUX_UNIT</span><span class="p">,</span>
                       <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde_index&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Logarithmic slope of the differential photon spectrum evaluated at the pivot energy.&#39;</span><span class="p">,</span>
                    <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde100_index&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Logarithmic slope of the differential photon spectrum evaluated at 100 MeV.&#39;</span><span class="p">,</span>
                       <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde1000_index&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Logarithmic slope of the differential photon spectrum evaluated evaluated at 1 GeV.&#39;</span><span class="p">,</span>
                        <span class="nb">float</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;dnde10000_index&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s1">&#39;Logarithmic slope of the differential photon spectrum evaluated at 10 GeV.&#39;</span><span class="p">,</span>
                         <span class="nb">float</span><span class="p">)),</span>
<span class="p">))</span>

<span class="n">source_output</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">source_meta_output</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">+</span>
                            <span class="nb">list</span><span class="p">(</span><span class="n">source_pos_output</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">+</span>
                            <span class="nb">list</span><span class="p">(</span><span class="n">source_flux_output</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>

<span class="c1"># Top-level dictionary for output file</span>
<span class="n">file_output</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">((</span>
    <span class="p">(</span><span class="s1">&#39;roi&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;A dictionary containing information about the ROI as a whole.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;sources&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;A dictionary containing information about individual sources in the model (diffuse and point-like).  &#39;</span>
                 <span class="s1">&#39;Each element of this dictionary maps to a single source in the ROI model.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;The configuration dictionary of the :py:class:`~fermipy.gtanalysis.GTAnalysis` instance.&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;The version of the Fermipy package that was used to run the analysis.  This is automatically generated from the git release tag.&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span>
<span class="p">))</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Fermipy Developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>